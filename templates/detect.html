<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Face-Off</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/icons.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/responsee.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='owl-carousel/owl.carousel.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='owl-carousel/owl.theme.css') }}">     
    <link rel="stylesheet" href="{{ url_for('static', filename='css/template-style.css') }}">
    <link href='https://fonts.googleapis.com/css?family=Playfair+Display&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700,800&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <script type="text/javascript" src="{{ url_for('static', filename='js/jquery-1.8.3.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/jquery-ui.min.js') }}"></script>     
    <script type="text/javascript" src="{{ url_for('static', filename='js/detect.js') }}"></script>
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='img/shortcut.jpg') }}" />
  </head>
  
  <body class="size-1140"  style="background-image: url({{ url_for('static', filename='img/header4-8.jpg') }}); background-size: cover; background-repeat: no-repeat;">
    <header role="banner" class="position-absolute">
      <nav class="background-transparent background-transparent-hightlight full-width sticky">
        <div class="s-12 l-2">
          <a href="/" class="logo">
            <img class="logo-white" src="{{ url_for('static', filename='img/logo.png') }}" alt="">
            <img class="logo-dark" src="{{ url_for('static', filename='img/logo-dark.png') }}" alt="">
          </a>
        </div>
        <div class="top-nav s-12 l-10">
          <p class="nav-text"></p>
          <ul class="right chevron">
            <li><a href="/">Home</a></li>
            <li><a href="/about#about">About</a></li>
            <li><a href="/about#privacy">Privacy</a></li>
          </ul>
        </div>
      </nav>
    </header>
    
    <main role="main">    

      <section class="section text-center">
          <h2 class="text-size-50 text-center text-white">Select Faces to Protect</h2>
          <div class="s-12 m-10 l-8 text-center center"><p class="text-white margin-bottom-40 text-size-16">Please click on the faces you would like to hide.<br/>Click the arrows or drag the image if you've uploaded more than one photo.</p></div>
          <hr class="break-small background-primary break-center">
          <form id="upload-det" enctype="multipart/form-data" action="" method="POST">
            {{form.csrf_token}}
            <div class="carousel-default owl-carousel">
              {% for file, dets in filedets.items() %}
                {% set outer_loop = loop %}
                <div class="item">
                  <span style="position:relative">
                    <img class="det-image" src="{{ url_for('static', filename='temp/'+file) }}" alt="" id="{{ outer_loop.index }}" orig-height="{{ filedims[file]['height'] }}" orig-width="{{ filedims[file]['width'] }}" style="height: auto; width: auto; object-fit: contain; display: block; margin-left: auto; margin-right: auto; max-width: 100%; max-height: 48vh;">
                    {% for b, box in dets.items() %}
                      <label class="button button-white-stroke s-12" btnclass="bounding-box" name="bound{{ outer_loop.index }}" scaled="false" style="border-width:3px; position:absolute; top:{{box[1]+23}}px; height:{{box[3]-box[1]}}px; left:{{box[0]-filedims[file]['width']/2}}px; width:{{box[2]-box[0]}}px; min-width: 1px; min-height: 1px;">
                        {{form|attr("customSwitch{}".format(b))(class_="face-check", onclick="unselect(this)", id=b)}}
                      </label>
                    {% endfor %}
                  </span>
                </div>
              {% endfor %}
            </div>
          </form>
          <div class="s-12 m-12 l-3 center">
            <label class="button button-white-stroke s-12 margin-top-bottom-10 text-size-20" id="select-all-label">
              Select All Faces  <input type="checkbox" class="select-all-check" name="select-all-btn" id="select-all-btn">
            </label>
            <button id="upload-det-btn" class="button button-white-stroke s-12 text-size-20">
              Accept
            </button>
          </div>
      </section>
    </main>
    <script type="text/javascript" src="{{ url_for('static', filename='js/responsee.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='owl-carousel/owl.carousel.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/template-scripts.js') }}"></script>
  </body>
</html>
